{
  "ollama_url": "http://192.168.88.164",
  "ollama_model": "qwen2.5vl:32b",
  
  "face_similarity_prompt": "````\nObjective**: Analyze two facial images (Image A: National ID, Image B: Selfie) and output similarity results exclusively in JSON format.\n**Workflow**:\n1. **Preprocessing**  \n   - Align faces using 68-point landmarks (frontal-center positioning)  \n   - Normalize lighting via CLAHE (clip=3.0, grid=8x8)  \n   - Resize to 512x512px (bicubic interpolation)  \n   - Apply BM3D denoising if PSNR <30dB  \n   - Auto-crop ID card borders (10% margin) and correct selfie lens distortion  \n2. **Feature Extraction**  \n   - **Geometric Measurements**:  \n     - Eyes: Interpupillary distance, canthal tilt, brow arch height  \n     - Nose: Bridge width, tip protrusion, nostril ratio  \n     - Contours: Jawline angle, cheekbone prominence, chin shape  \n   - **Proportional Analysis**:  \n     - Facial thirds (forehead/midface/lowerface) vs Golden Ratio (1.618)  \n   - **Distinctive Features**:  \n     - Ear helix curvature (if visible)  \n     - Skin texture (SIFT keypoints + GLCM contrast)  \n   - **Symmetry Assessment**:  \n     - Vertical MSE (landmark mirroring)  \n     - Horizontal tilt deviation  \n3. **Weighted Scoring**  \n```python\nscores = {\n  \"bone_structure\": max(0, min(100, [Cosine similarity of jaw/nose/eye metrics]) * 0.35,\n  \"distinctive_features\": max(0, min(100, [Ear/skin/asymmetry similarity]) * 0.30,\n  \"proportional_ratios\": max(0, min(100, [Golden ratio deviations])) * 0.25,\n  \"spatial_alignment\": max(0, min(100, [1 - (MSE/50)])) * 0.10\n}\nraw_score = sum(scores.values())\n````\n4.  **Confidence Calibration**\n    \npython\nCopy\nDownload\n```\nquality_factor = min(1.0, \n  0.3*lighting_quality + 0.4*sharpness + 0.3*landmark_confidence\n)\nfinal_score = int(raw_score * (0.6 + 0.4*quality_factor))\n```\n5.  **Mismatch Detection**\n    \n    *   Apply penalties if thresholds breached:\n        \n        *   Jaw angle >5° diff: -20%\n            \n        *   Canthal tilt >3° diff: -10%\n            \n        *   Lighting entropy <4.2: -15%\n            \n**Output Requirements**:\n*   **Exclusively return JSON** with these keys(return Only this shemas json in the return):\n    \n```\n{\n  \"similarity_score\": \"Integer 0-100\",\n  \"match_confidence\": \"High/Medium/Low\",\n  \"quality_warnings\": [\"List of strings describing issues\"],\n  \"processed_metrics\": {\n    \"bone_structure\": float,\n    \"distinctive_features\": float,\n    \"proportional_ratios\": float,\n    \"spatial_alignment\": float\n  }\n}\n```\n**Output Rules**:\n1.  Always valid JSON (no extra text)\n    \n2.  `match_confidence` based on:\n    \n    *   High: quality_factor ≥ 0.8 AND no warnings\n        \n    *   Medium: quality_factor ≥ 0.5\n        \n    *   Low: quality_factor < 0.5 OR warnings present\n        \n3.  `quality_warnings` examples:\n    \n    *   \"ID card border distortion detected\"\n        \n    *   \"Selfie pitch >5° affects jawline measurement\"\n        \n    *   \"Low lighting entropy (3.8) in Image B\"\n        \n**Example Output**:\n```\n{\n  \"similarity_score\": 42,\n  \"match_confidence\": \"Low\",\n  \"quality_warnings\": [\n    \"Jaw angle difference exceeds threshold (7.2°)\",\n    \"ID card moiré pattern reduces feature clarity\"\n  ],\n  \"processed_metrics\": {\n    \"bone_structure\": 28.7,\n    \"distinctive_features\": 15.2,\n    \"proportional_ratios\": 10.5,\n    \"spatial_alignment\": 6.3\n  }\n}\n```"
}